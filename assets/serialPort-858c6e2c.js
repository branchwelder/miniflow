import{D as d,x as l}from"./index-6e2f550d.js";class p{constructor(){this.container=""}transform(r,n){this.container+=r;const e=this.container.split(`\r
`);this.container=e.pop(),e.forEach(t=>n.enqueue(t))}flush(r){r.enqueue(this.container)}}function b(){async function o(e){console.log(e.port),await e.port.close(),e.port=void 0}async function r(e){if(!1 in navigator){alert("Please update to the latest Chrome");return}const t=await navigator.serial.requestPort();t.getInfo(),await t.open({baudRate:9600}),e.port=t}function n(e){return e.port?l`<button @click=${()=>o(e)}>
        disconnect
      </button>`:l`<button @click=${()=>r(e)}>connect</button>`}return{displayName:"Number",stateConfig:{port:{type:"port",value:void 0,change({state:e,outputs:t},a,u){a||(t.readableStream=void 0,t.writableStream=void 0);const i=new TextEncoderStream;i.readable.pipeTo(a.writable);let c=new TextDecoderStream;a.readable.pipeTo(c.writable);const s=c.readable.pipeThrough(new TransformStream(new p));t.readableStream=s.getReader(),t.writableStream=i.writable.getWriter()}}},outputConfig:{readableStream:{type:"readableStream"},writableStream:{type:"writableStream"}},render({dom:e,state:t}){d(n(t),e)},saveState(e){return{port:void 0}}}}export{b as default};
